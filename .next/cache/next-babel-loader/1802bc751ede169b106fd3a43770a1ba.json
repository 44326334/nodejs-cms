{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\n// import constructors from './constructors';\n// const URL = 'http://localhost:3000/admin/api'\nvar domain = 'http://localhost';\nvar port = '3000';\nvar route = 'admin/api';\n\nvar queryDocs = require('./constructors');\n\nvar GRAPHQL_URL = 'http://localhost:3000/admin/api';\n\nvar createCall = function createCall(queryDoc, accessToken) {\n  var payload, response, body;\n  return _regeneratorRuntime.async(function createCall$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          payload = _JSON$stringify({\n            query: queryDoc\n          });\n          _context.prev = 1;\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(fetch(GRAPHQL_URL, {\n            method: 'POST',\n            headers: {\n              // Authorization: `token ${accessToken}`,\n              'Content-Type': 'application/json'\n            },\n            body: payload\n          }));\n\n        case 4:\n          response = _context.sent;\n          console.log(response);\n          _context.next = 11;\n          break;\n\n        case 8:\n          _context.prev = 8;\n          _context.t0 = _context[\"catch\"](1);\n          return _context.abrupt(\"return\", {\n            status: response.status,\n            message: _context.t0.message,\n            ok: false,\n            body: {}\n          });\n\n        case 11:\n          _context.prev = 11;\n          _context.next = 14;\n          return _regeneratorRuntime.awrap(response.json());\n\n        case 14:\n          body = _context.sent;\n          _context.next = 20;\n          break;\n\n        case 17:\n          _context.prev = 17;\n          _context.t1 = _context[\"catch\"](11);\n          return _context.abrupt(\"return\", {\n            status: response.status,\n            message: _context.t1.message,\n            ok: response.ok,\n            body: {}\n          });\n\n        case 20:\n          if (response.ok) {\n            _context.next = 22;\n            break;\n          }\n\n          return _context.abrupt(\"return\", {\n            status: response.status,\n            message: 0,\n            ok: response.ok,\n            body: {}\n          });\n\n        case 22:\n          return _context.abrupt(\"return\", body.data ? {\n            status: response.status,\n            message: 0,\n            ok: response.ok,\n            body: body.data\n          } : {\n            status: response.status,\n            message: 0,\n            ok: false,\n            body: {}\n          });\n\n        case 23:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[1, 8], [11, 17]]);\n};\n\nexport var queryid = function queryid(_ref, accessToken) {\n  var id = _ref.id;\n  return createCall(queryDocs.queryAllUsers({\n    id: id\n  }, accessToken));\n};","map":{"version":3,"sources":["C:/cmsapp/api/index.js"],"names":["domain","port","route","queryDocs","require","GRAPHQL_URL","createCall","queryDoc","accessToken","payload","query","fetch","method","headers","body","response","console","log","status","message","ok","json","data","queryid","id","queryAllUsers"],"mappings":";;AAAA;AAEA;AACA,IAAMA,MAAM,GAAG,kBAAf;AACA,IAAMC,IAAI,GAAG,MAAb;AACA,IAAMC,KAAK,GAAG,WAAd;;AACA,IAAMC,SAAS,GAAGC,OAAO,CAAC,gBAAD,CAAzB;;AACA,IAAMC,WAAW,GAAG,iCAApB;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAOC,QAAP,EAAiBC,WAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACXC,UAAAA,OADW,GACD,gBAAe;AAC7BC,YAAAA,KAAK,EAAEH;AADsB,WAAf,CADC;AAAA;AAAA;AAAA,2CAMEI,KAAK,CACpBN,WADoB,EAEpB;AACEO,YAAAA,MAAM,EAAE,MADV;AAEEC,YAAAA,OAAO,EAAE;AACP;AACA,8BAAgB;AAFT,aAFX;AAMEC,YAAAA,IAAI,EAAEL;AANR,WAFoB,CANP;;AAAA;AAMfM,UAAAA,QANe;AAiBfC,UAAAA,OAAO,CAACC,GAAR,CAAYF,QAAZ;AAjBe;AAAA;;AAAA;AAAA;AAAA;AAAA,2CAmBR;AACLG,YAAAA,MAAM,EAAEH,QAAQ,CAACG,MADZ;AAELC,YAAAA,OAAO,EAAE,YAAEA,OAFN;AAGLC,YAAAA,EAAE,EAAE,KAHC;AAILN,YAAAA,IAAI,EAAE;AAJD,WAnBQ;;AAAA;AAAA;AAAA;AAAA,2CA4BFC,QAAQ,CAACM,IAAT,EA5BE;;AAAA;AA4BfP,UAAAA,IA5Be;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,2CA8BR;AACLI,YAAAA,MAAM,EAAEH,QAAQ,CAACG,MADZ;AAELC,YAAAA,OAAO,EAAE,YAAEA,OAFN;AAGLC,YAAAA,EAAE,EAAEL,QAAQ,CAACK,EAHR;AAILN,YAAAA,IAAI,EAAE;AAJD,WA9BQ;;AAAA;AAAA,cAqCbC,QAAQ,CAACK,EArCI;AAAA;AAAA;AAAA;;AAAA,2CAsCR;AACLF,YAAAA,MAAM,EAAEH,QAAQ,CAACG,MADZ;AAELC,YAAAA,OAAO,EAAE,CAFJ;AAGLC,YAAAA,EAAE,EAAEL,QAAQ,CAACK,EAHR;AAILN,YAAAA,IAAI,EAAE;AAJD,WAtCQ;;AAAA;AAAA,2CA6CVA,IAAI,CAACQ,IAAL,GACN;AACCJ,YAAAA,MAAM,EAAEH,QAAQ,CAACG,MADlB;AAECC,YAAAA,OAAO,EAAE,CAFV;AAGCC,YAAAA,EAAE,EAAEL,QAAQ,CAACK,EAHd;AAICN,YAAAA,IAAI,EAAEA,IAAI,CAACQ;AAJZ,WADM,GAON;AACCJ,YAAAA,MAAM,EAAEH,QAAQ,CAACG,MADlB;AAECC,YAAAA,OAAO,EAAE,CAFV;AAGCC,YAAAA,EAAE,EAAE,KAHL;AAICN,YAAAA,IAAI,EAAE;AAJP,WApDgB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAnB;;AA4DA,OAAO,IAAMS,OAAO,GAAG,SAAVA,OAAU,OAAOf,WAAP,EAAuB;AAAA,MAArBgB,EAAqB,QAArBA,EAAqB;AAC5C,SAAOlB,UAAU,CAACH,SAAS,CAACsB,aAAV,CAAwB;AAACD,IAAAA,EAAE,EAAFA;AAAD,GAAxB,EAA8BhB,WAA9B,CAAD,CAAjB;AACD,CAFM","sourcesContent":["// import constructors from './constructors';\r\n\r\n// const URL = 'http://localhost:3000/admin/api'\r\nconst domain = 'http://localhost';\r\nconst port = '3000';\r\nconst route = 'admin/api';\r\nconst queryDocs = require('./constructors')\r\nconst GRAPHQL_URL = 'http://localhost:3000/admin/api'\r\n\r\nconst createCall = async (queryDoc, accessToken) => {\r\n  const payload = JSON.stringify({\r\n    query: queryDoc\r\n  });\r\n  let response; \r\n  try {\r\n    response = await fetch(\r\n      GRAPHQL_URL,\r\n      {\r\n        method: 'POST',\r\n        headers: {\r\n          // Authorization: `token ${accessToken}`,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: payload,\r\n      }\r\n    );\r\n    console.log(response)\r\n  } catch(e) {\r\n    return {\r\n      status: response.status,\r\n      message: e.message,\r\n      ok: false,\r\n      body: {}\r\n    }\r\n  }\r\n  let body\r\n  try {\r\n    body = await response.json();\r\n  } catch(e) {\r\n    return {\r\n      status: response.status,\r\n      message: e.message,\r\n      ok: response.ok,\r\n      body: {}\r\n    }\r\n  }\r\n  if(!response.ok) {\r\n    return {\r\n      status: response.status,\r\n      message: 0,\r\n      ok: response.ok,\r\n      body: {}\r\n    }\r\n  }\r\n  return body.data\r\n  ?{\r\n    status: response.status,\r\n    message: 0,\r\n    ok: response.ok,\r\n    body: body.data\r\n  }\r\n  :{\r\n    status: response.status,\r\n    message: 0,\r\n    ok: false,\r\n    body: {}\r\n  }\r\n}\r\n\r\nexport const queryid = ({id}, accessToken) => {\r\n  return createCall(queryDocs.queryAllUsers({id}, accessToken))\r\n}"]},"metadata":{},"sourceType":"module"}